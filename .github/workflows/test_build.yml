name: '[ðŸ§ª] Test build'
run-name: '[ðŸ§ª] Test build on `${{ github.ref }}`'

on:
    push:
    pull_request:

jobs:
    build:
        strategy:
            matrix:
                os:
                    - ubuntu-22.04
                    - ubuntu-20.04
                    - macos-12
                    - macos-11
        runs-on: ${{ matrix.os }}
        name: '[ðŸ§ª] Test Build on ${{ matrix.os }}'
        steps:
            - name: '[ðŸ“¥] checkout'
              uses: actions/checkout@v3
              with:
                  fetch-depth: 0

            - name: '[ðŸ‘·] run build script on git repository'
              run: |
                  ./build/build.sh --full

            - name: '[ðŸ”¥] clean and remove git'
              run: |
                  git clean -xdf
                  rm -rf .git

            - name: '[ðŸ‘·] run build script on non-git directory'
              run: |
                  ./build/build.sh --full